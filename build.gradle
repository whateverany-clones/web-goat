buildscript {
  repositories {
    mavenLocal()
    maven {
     url repositoryUrl+'/all'
    }
  }
  dependencies {
    classpath 'org.jfrog.buildinfo:build-info-extractor-gradle:4.7.5'
    classpath 'pl.allegro.tech.build:axion-release-plugin:1.9.3'
  }
}

allprojects  {
  apply plugin: 'com.jfrog.artifactory'
  apply plugin: 'pl.allegro.tech.build.axion-release'
  apply plugin: 'maven'
  apply plugin: 'maven-publish'

  group = 'org.owasp.webgoat'
  version = scmVersion.version

  repositories {
    mavenLocal()
    maven { url repositoryUrl+'/all' }
  }
  
}

scmVersion {
  versionIncrementer 'incrementMinor'
}

subprojects {
  apply plugin: 'java'
  //sourceCompatibility = 1.5
  //targetCompatibility = 1.5
  tasks.withType(JavaCompile) {
  	options.encoding = 'UTF-8'
  }

  dependencies {
    compile group: 'org.apache.commons', name: 'commons-exec', version:'1.3'
    compileOnly group: 'org.projectlombok', name: 'lombok', version:'1.16.20'
  }

}

task wrapper(type: Wrapper) {
  gradleVersion = '3.5.1'
}

publishing {
  repositories {
    mavenLocal()
    maven {
      url repositoryUrl+'/artifacts'
    }
  }
}
